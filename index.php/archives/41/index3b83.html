<!DOCTYPE HTML>
<html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->

<!-- Mirrored from www.horsebro1.com/index.php/archives/41/?replyTo=10 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 24 Feb 2020 05:50:33 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width,user-scalable=no">
    <title>木马哥的蜜罐教程 - 骑木马的哥哥博客</title>
	<!--[if lt IE 9]>
    <script type="text/javascript" src="https://www.horsebro1.com/usr/themes/maupassant/javascript/html5shiv.js"></script>
    <![endif]-->
    <!-- 因为后台的admin目录设置了认证，因此将该css文件复制到了主题目录下 -->
    <!--<link rel="stylesheet" href="https://www.horsebro1.com/admin/css/normalize.css">-->
    <link rel="stylesheet" href="../../../usr/themes/maupassant/normalize.css">
    <link rel="stylesheet" href="../../../usr/themes/maupassant/style.css">
    <meta name="description" content="蜜罐好比是情报收集系统。蜜罐好像是故意让人攻击的目标，引诱黑客前来攻击。当攻击者尝试进行入侵，你就可以知道他的来源地址，但并不会对真实系统造成伤害。该项目是用Java编写的小型蜜罐系统，通过该教..." />
<link rel="pingback" href="../../action/xmlrpc.html" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../action/xmlrpc0db0.html?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../action/xmlrpc2ace.html?wlw" />
<link rel="alternate" type="application/rss+xml" title="木马哥的蜜罐教程 &raquo; 骑木马的哥哥博客 &raquo; RSS 2.0" href="../../feed/archives/41/index.html" />
<link rel="alternate" type="application/rdf+xml" title="木马哥的蜜罐教程 &raquo; 骑木马的哥哥博客 &raquo; RSS 1.0" href="../../feed/rss/archives/41/index.html" />
<link rel="alternate" type="application/atom+xml" title="木马哥的蜜罐教程 &raquo; 骑木马的哥哥博客 &raquo; ATOM 1.0" href="../../feed/atom/archives/41/index.html" />
<script type="text/javascript">
(function () {
    window.TypechoComment = {
        dom : function (id) {
            return document.getElementById(id);
        },
    
        create : function (tag, attr) {
            var el = document.createElement(tag);
        
            for (var key in attr) {
                el.setAttribute(key, attr[key]);
            }
        
            return el;
        },

        reply : function (cid, coid) {
            var comment = this.dom(cid), parent = comment.parentNode,
                response = this.dom('respond-post-41'), input = this.dom('comment-parent'),
                form = 'form' == response.tagName ? response : response.getElementsByTagName('form')[0],
                textarea = response.getElementsByTagName('textarea')[0];

            if (null == input) {
                input = this.create('input', {
                    'type' : 'hidden',
                    'name' : 'parent',
                    'id'   : 'comment-parent'
                });

                form.appendChild(input);
            }

            input.setAttribute('value', coid);

            if (null == this.dom('comment-form-place-holder')) {
                var holder = this.create('div', {
                    'id' : 'comment-form-place-holder'
                });

                response.parentNode.insertBefore(holder, response);
            }

            comment.appendChild(response);
            this.dom('cancel-comment-reply-link').style.display = '';

            if (null != textarea && 'text' == textarea.name) {
                textarea.focus();
            }

            return false;
        },

        cancelReply : function () {
            var response = this.dom('respond-post-41'),
            holder = this.dom('comment-form-place-holder'), input = this.dom('comment-parent');

            if (null != input) {
                input.parentNode.removeChild(input);
            }

            if (null == holder) {
                return true;
            }

            this.dom('cancel-comment-reply-link').style.display = 'none';
            holder.parentNode.insertBefore(response, holder);
            return false;
        }
    };
})();
</script>
<script type="text/javascript">
(function () {
    var event = document.addEventListener ? {
        add: 'addEventListener',
        triggers: ['scroll', 'mousemove', 'keyup', 'touchstart'],
        load: 'DOMContentLoaded'
    } : {
        add: 'attachEvent',
        triggers: ['onfocus', 'onmousemove', 'onkeyup', 'ontouchstart'],
        load: 'onload'
    }, added = false;

    document[event.add](event.load, function () {
        var r = document.getElementById('respond-post-41'),
            input = document.createElement('input');
        input.type = 'hidden';
        input.name = '_';
        input.value = (function () {
    var _rkV = //'7Y'
'a'+//'OCS'
'9b1'+//'P'
'4d'+//'o7'
'd'+'f'//'Nn2'
+'29f'//'TN7'
+/* '5WP'//'5WP' */''+'A1'//'A1'
+'07'//'PZZ'
+'3'//'4EL'
+//'8g'
'a'+//'A'
'A'+//'to'
'to'+//'0Q'
'0Q'+//'W'
'67'+//'sy6'
'def'+//'1Ab'
'16d'+//'1'
'd7d'+//'k'
'5a'+//'g'
'8ec'+'3'//'rD'
, _IRvEN = [[11,13],[15,16],[15,17],[15,17]];
    
    for (var i = 0; i < _IRvEN.length; i ++) {
        _rkV = _rkV.substring(0, _IRvEN[i][0]) + _rkV.substring(_IRvEN[i][1]);
    }

    return _rkV;
})();

        if (null != r) {
            var forms = r.getElementsByTagName('form');
            if (forms.length > 0) {
                function append() {
                    if (!added) {
                        forms[0].appendChild(input);
                        added = true;
                    }
                }
            
                for (var i = 0; i < event.triggers.length; i ++) {
                    var trigger = event.triggers[i];
                    document[event.add](trigger, append);
                    window[event.add](trigger, append);
                }
            }
        }
    });
})();
</script></head>
<body>

<header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                                    <a id="logo" href="../../../index.html">
                        骑木马的哥哥博客                    </a>
                        	    <p class="description">我是人间惆怅客，知君何事泪纵横，断肠声里忆平生</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class=" current" href="../../../index.html">博客</a>
															<a href="../../archive.html" title="归档">归档</a>
										<a href="../../link.html" title="友情链接">友情链接</a>
										<a href="../../me.html" title="关于">关于</a>
									</nav>
            </div>
        </div>
    </div>
</header>
<div id="body">
    <div class="container">
        <div class="col-group">
<div class="col-8" id="main">
	<div class="res-cons">
		<article class="post">
			<header>
				<h1 class="post-title">木马哥的蜜罐教程</h1>
			</header>
			<date class="post-meta">
				October 7, 2018			</date>
			<div class="post-content">
				<p>蜜罐好比是情报收集系统。蜜罐好像是故意让人攻击的目标，引诱黑客前来攻击。当攻击者尝试进行入侵，你就可以知道他的来源地址，但并不会对真实系统造成伤害。该项目是用Java编写的小型蜜罐系统，通过该教程你可以很方便地侦测和记录一些来自于网络上的攻击。<br> <br>接下来，我将搭建一台模拟运行：Web容器，Mysql数据库,代理服务，远程桌面服务的主机。<br> <br>其中，各项服务对应的端口号为：80,3306,8080,3389</p><!--more--><p>蜜罐的下载地址为：<a href="https://coding.net/u/hack4b/p/Mini-Honeypot/git/raw/master/Honeypot-bin.zip">https://coding.net/u/hack4b/p/Mini-Honeypot/git/raw/master/Honeypot-bin.zip</a></p><p>项目主页为：<a href="https://github.com/horsebro1/Mini-Honeypot">https://github.com/horsebro1/Mini-Honeypot</a></p><p>注意：蜜罐的运行环境依赖JVM。因此，你必须安装JRE，即Java的运行环境。JVM的下载地址为：<a href="http://www.java.com/">http://www.java.com</a><br> <br>解压Honeypot-bin.zip，你将会得到conf.xml。该文件是蜜罐系统的配置文件，根据上述需求，我们修改配置文件如下：</p><pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Honeypot-conf&gt;
    &lt;!-- 指定蜜罐系统开放的端口，多个端口用逗号(,)分隔。 --&gt;
    &lt;Honeypot-port&gt;80,8080,3306&lt;/Honeypot-port&gt;
    &lt;!-- 指定蜜罐系统的日志文件，支持绝对路径，Windows系统下文件分割符请使用：&quot;\\&quot; --&gt;
    &lt;Honeypot-log&gt;AttackLog.log&lt;/Honeypot-log&gt;
    &lt;!-- 指定蜜罐发送的消息 --&gt;
    &lt;Honeypot-message&gt;The connect reset.&lt;/Honeypot-message&gt;
&lt;/Honeypot-conf&gt;</code></pre><p>如果你需要指定日志文件名，请修改尖括号对的内容。下面的配置文件展示了将日志文件名重命名为15-10-12.log，直接指定文件名，该文件会保存在程序的运行目录下。如果你想保存到其他地方，请指定程序的绝对路径。注意：Windows系统的文件分割符需使用”\”，例如：”D:\logfile\logfile.log”</p><pre><code> &lt;Honeypot-log&gt;15-10-12.log&lt;/Honeypot-log&gt;</code></pre><p>在配置文件中，你可以指定蜜罐向攻击者发送的消息，下面的例子说明蜜罐向攻击者发送”Hello Man!”。当蜜罐开放的端口遭受到攻击，蜜罐将会发送该消息。如果留空，当蜜罐开放的端口遭受到攻击，蜜罐将会立即断开连接。</p><pre><code>&lt;Honeypot-message&gt;Hello Man!&lt;/Honeypot-message&gt;</code></pre><p>至此，配置文件配置好后，我们运行start.bat启动蜜罐(如果是Linux系统，请运行start.sh)。你将会得到如下窗口：<br><img src="../../../usr/uploads/2018/10/3702211746.png" alt="miguan1.png" title="miguan1.png"></p><p>注意：如果该窗口出现闪退，你应当检查配置文件和当前端口的占用情况，以及更新你现有的Java版本。这通常是由于版本过低和端口冲突造成的。蜜罐始终会显示该窗口，直到你关闭蜜罐（关闭窗口）。有关错误的详细信息，你可以运行debug.bat文件。Linux系统请使用管道输出错误信息。<br> <br>接下来，我将启动KaliLinux并运行Nmap对蜜罐主机进行端口探测，探测的结果如下：<br><img src="../../../usr/uploads/2018/10/63428329.png" alt="miguan2.png" title="miguan2.png"><br> <br>我们可以看到，Nmap成功探测到蜜罐主机所开放的端口。如果我们尝试访问端口，蜜罐将会拒绝访问：<br><img src="../../../usr/uploads/2018/10/577298351.png" alt="miguan3.png" title="miguan3.png"></p><p>至此，我们来看看蜜罐的工作情况，蜜罐已经为我们记录下了攻击者的信息并写入了日志文件：<br><img src="../../../usr/uploads/2018/10/24581171.png" alt="miguan4.png" title="miguan4.png"><br> <br>通常，某些访问请求的数据包是不携带主机名信息的。因此你只能看到远程主机的IP地址。<br> <br>以下是我设想的一些该蜜罐系统的使用场景：<br>1.你可以不用上线真实的业务系统，从而诱使攻击者暴露他的地址信息。<br>2.你可以配置蜜罐的返回消息逗攻击者玩，例如攻击者尝试攻击你的电脑，他会收到：“Stupid Man!”，不过在此之前你需要把这句话加入到配置文件。<br>3.你可以把蜜罐主机完全暴露给外网，以此来测量主机受攻击的频率。</p>			</div>
		</article>
		<div id="comments">
        	<span class="widget-title">仅有 1 条评论</span>
    <ol class="comment-list"><li itemscope itemtype="http://schema.org/UserComments" id="comment-10" class="comment-body comment-parent comment-odd">
    <div class="comment-author" itemprop="creator" itemscope itemtype="http://schema.org/Person">
        <span itemprop="image"><img class="avatar" src="https://secure.gravatar.com/avatar/0ab1bba056bbc71082df4035125a2b25?s=32&amp;r=G&amp;d=" alt="乱码" width="32" height="32" /></span>
        <cite class="fn" itemprop="name"><a href="https://luan.ma/" rel="external nofollow">乱码</a></cite>
    </div>
    <div class="comment-meta">
        <a href="index.html#comment-10"><time itemprop="commentTime" datetime="2018-10-29T22:44:09+00:00">October 29th, 2018 at 10:44 pm</time></a>
            </div>
    <div class="comment-content" itemprop="commentText">
    <p>但是扫端口号的人每天都好多，特别是在知名的云上面，拿到IP也没啥用</p>    </div>
    <div class="comment-reply">
        <a href="index3b83.html?replyTo=10#respond-post-41" rel="nofollow" onclick="return TypechoComment.reply('comment-10', 10);">回复</a>    </div>
    </li>
</ol>                <div id="respond-post-41" class="respond">
        <div class="cancel-comment-reply">
        <a id="cancel-comment-reply-link" href="index.html#respond-post-41" rel="nofollow" onclick="return TypechoComment.cancelReply();">取消回复</a>        </div>
    	<span id="response" class="widget-title">添加新评论</span>
    	<form method="post" action="https://www.horsebro1.com/index.php/archives/41/comment?parent=10" id="comment-form">
			<div class="col1">
			<p>
                <textarea rows="8" cols="50" name="text" class="textarea"></textarea>
            </p>
			</div>
			<div class="col2">
                		<p>
                <label for="author" class="required">称呼</label>
    			<input type="text" name="author" id="author" class="text" value="" />
    		</p>
    		<p>
                <label for="mail" class="required">邮箱</label>
    			<input type="email" name="mail" id="mail" class="text" value="" />
    		</p>
    		<p>
                <label for="url">网站</label>
    			<input type="url" name="url" id="url" class="text" placeholder="http://example.com" value="" />
    		</p>
                		<p>
                <button type="submit" class="submit">提交评论</button>
            </p>
			</div>
			<div class="clear"></div>
    	</form>
    </div>
    </div>	</div>
</div>
<div id="secondary">
	<section class="widget">
        <form id="search" method="post" action="https://www.horsebro1.com/index.php/archives/41/">
            <input type="text" name="s" class="text" placeholder="搜索..." />
            <button type="submit" class="submit icon-search">搜索</button>
        </form>
    </section>

	    <section class="widget">
		<h3 class="widget-title">最新文章</h3>
        <ul class="widget-list">
            <li><a href="../67/index.html">实现理想的短暂</a></li><li><a href="../66/index.html">推开梦想的大门</a></li><li><a href="../65/index.html">聊聊网警是如何抓到你的</a></li><li><a href="../63/index.html">为什么而活着（下）</a></li><li><a href="../61/index.html">为什么而活着(上)</a></li><li><a href="../58/index.html">致高考六周年</a></li><li><a href="../57/index.html">蓉城杂谈</a></li><li><a href="../53/index.html">Git常用命令</a></li><li><a href="../52/index.html">大学与计算机科学</a></li><li><a href="../48/index.html">Ubuntu Server开启Google BBR</a></li>        </ul>
    </section>
    
        <section class="widget">
		<h3 class="widget-title">最近回复</h3>
        <ul class="widget-list">
                            <li><a href="../../link.html#comment-59">phy</a>: https://pu...</li>
                    <li><a href="../../link.html#comment-58">phy</a>: https://gi...</li>
                    <li><a href="../63/index.html#comment-57">不明真相</a>: 去了一线城市，一年新...</li>
                    <li><a href="../61/index.html#comment-56">不重要</a>: 笑起来像spring...</li>
                    <li><a href="../63/index.html#comment-55">fate</a>: 我就是信息安全从业者...</li>
                    <li><a href="../63/index.html#comment-54">方丈</a>: 成都太养老了，我就是...</li>
                    <li><a href="../63/index.html#comment-53">鸟不拉屎</a>: 感触挺深，共勉</li>
                    <li><a href="../63/index.html#comment-52">静水流深</a>: 我也前不久刚回武汉，...</li>
                    <li><a href="../63/index.html#comment-50">好的</a>: 我和你一样，也是职高...</li>
                    <li><a href="../63/index.html#comment-49">...</a>: 35岁再正常不过.....</li>
                </ul>
    </section>
    
        <section class="widget">
		<h3 class="widget-title">分类</h3>
        <ul class="widget-list">
            <li><a href="../../category/tech/index.html">技术</a> (6)</li><li><a href="../../category/essay/index.html">随笔</a> (12)</li>        </ul>
	</section>
    
        <section class="widget">
		<h3 class="widget-title">归档</h3>
        <ul class="widget-list">
            <li><a href="../../2020/02/index.html">February 2020</a></li><li><a href="../../2020/01/index.html">January 2020</a></li><li><a href="../../2019/08/index.html">August 2019</a></li><li><a href="../../2019/07/index.html">July 2019</a></li><li><a href="../../2019/06/index.html">June 2019</a></li><li><a href="../../2019/05/index.html">May 2019</a></li><li><a href="../../2019/04/index.html">April 2019</a></li><li><a href="../../2018/11/index.html">November 2018</a></li><li><a href="../../2018/10/index.html">October 2018</a></li><li><a href="../../2018/09/index.html">September 2018</a></li><li><a href="../../2017/12/index.html">December 2017</a></li><li><a href="../../2017/06/index.html">June 2017</a></li><li><a href="../../2016/12/index.html">December 2016</a></li>        </ul>
	</section>
    
    	<section class="widget">
		<h3 class="widget-title">其它</h3>
        <ul class="widget-list">
                            <!-- 取消登录超链接 -->
                <!--<li class="last"><a href="https://www.horsebro1.com/admin/login.php">登录</a></li>-->
                        <li><a href="../../feed/index.html">文章 RSS</a></li>
            <li><a href="../../feed/comments/index.html">评论 RSS</a></li>
            <!-- 取消版权 -->
            <!--<li><a href="http://www.typecho.org">Typecho</a></li>-->
        </ul>
	</section>
    </div>		</div>
    </div>
</div>
<footer id="footer">
	<div class="container">
		&copy; 2020 <a rel="nofollow" href="../../../index.html">骑木马的哥哥博客</a>. Theme Provided:<a href="https://github.com/pagecho/maupassant" target="_blank">Maupassant
</a>.
	</div>
</footer>
</body>

<!-- Mirrored from www.horsebro1.com/index.php/archives/41/?replyTo=10 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 24 Feb 2020 05:50:33 GMT -->
</html>
